<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://ofbiz.apache.org/Widget-Screen"
	xsi:schemaLocation="http://ofbiz.apache.org/Widget-Screen http://ofbiz.apache.org/dtds/widget-screen.xsd">

	<screen name="main">
		<section>
			<actions>
				<set field="headerItem" value="main" /><!-- this highlights the selected menu-item with name "main" -->
			</actions>
			<widgets>
				<decorator-screen name="BorFinanceCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="AjaxBfinProduct">
		<section>
			<actions>
				<set field="headerItem" value="AjaxBfinProduct" />
				<set field="titleProperty" value="PageTitleFindBfinProduct" />
				<set field="exampleCtx" from-field="parameters" />
			</actions>
			<widgets>
				<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<if-has-permission permission="BORFINANCE" action="_VIEW" />
							</condition>
							<widgets>
								<container style="h1">
									<label>${uiLabelMap[titleProperty]}</label>
								</container>
								<section>
									<condition>
										<if-compare field="javaScriptEnabled" value="true" operator="equals" />
									</condition>
									<widgets />
									<fail-widgets>
										<container style="button-bar">
											<label>${uiLabelMap.ExampleAjaxIntro}</label>
										</container>
									</fail-widgets>
								</section>
								<container style="h2">
									<label>${uiLabelMap.NewBfinProduct}</label>
								</container>
								<container id="EditBfinProductAjax">
									<include-screen name="CreateBfinProductFormOnly" />
								</container>
								<container id="ListBfinProductsAjax">
									<include-screen name="ListBfinProductFormOnly" />
								</container>
								
							</widgets>
							<fail-widgets>
								<label style="h3">${uiLabelMap.BorFinanceViewPermissionError}</label>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="ListBfinProductFormOnly">
		<section>
			<condition>
				<if-has-permission permission="BORFINANCE" action="_VIEW" />
			</condition>
			<actions>
				<!-- NOTE: these are needed because this may be run as a top level screen and would have no decorator -->
				<property-map resource="BorFinanceUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true" />
				<set field="bfinCtx" from-field="parameters" />
			</actions>
			<widgets>
				<!-- <include-form name="ListBfinProductAjax" location="component://borFinance/widget/BorFinanceForms.xml" /> -->
				<include-form name="ListBfinProduct" location="component://borFinance/widget/BorFinanceForms.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="CreateBfinProductFormOnly">
		<section>
			<condition>
				<if-has-permission permission="BORFINANCE" action="_VIEW" />
			</condition>
			<actions>
				<!-- these are only needed so that when groovy evaluates use-when attributes these will exist and not cause an error -->
				<property-map resource="BorFinanceUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true" />
				<set field="prodId" from-field="parameters.prodId" />
				<entity-one entity-name="BfinProduct" value-field="bfinProduct" />
			</actions>
			<widgets>
				<!-- <include-form name="EditBfinProductBackgroundSubmit" location="component://borFinance/widget/BorFinanceForms.xml" /> -->
				<include-form name="EditBfinProduct" location="component://borFinance/widget/BorFinanceForms.xml" />
			</widgets>
		</section>
	</screen>

</screens>